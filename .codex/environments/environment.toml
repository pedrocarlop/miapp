# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "miapp"

[setup]
script = ""

[[actions]]
name = "Run"
icon = "run"
command = '''
# 1) Ir a la carpeta del proyecto
cd /Users/pedrocarrascolopezbrea/Projects/miapp

# 2) Ver dispositivos y copiar el UDID del iPhone conectado
xcrun devicectl list devices

# 3) Compilar para iPhone (Debug)
# Si tienes .xcworkspace:
xcodebuild -workspace miapp.xcworkspace -scheme miapp -configuration Debug -sdk iphoneos -derivedDataPath /tmp/miapp-dd build
# Si tienes .xcodeproj (cambia seg√∫n tu caso):
# xcodebuild -project miapp.xcodeproj -scheme miapp -configuration Debug -sdk iphoneos -derivedDataPath /tmp/miapp-dd build

# 4) Instalar la .app en el iPhone (sustituye <UDID>)
APP_PATH="$(find /tmp/miapp-dd/Build/Products/Debug-iphoneos -maxdepth 1 -name '*.app' -print -quit)"
xcrun devicectl device install app --device <UDID> "$APP_PATH"

# 5) Lanzar la app (sustituye el bundle id real)
xcrun devicectl device launch app --terminate-existing --device <UDID> com.tu.bundleid.miapp
'''

[[actions]]
name = "Run"
icon = "tool"
command = '''
cd /Users/pedrocarrascolopezbrea/Projects/miapp
ls *.xcodeproj 2>/dev/null
ls *.xcworkspace 2>/dev/null
xcodebuild -project miapp.xcodeproj -list
xcodebuild -project miapp.xcodeproj -scheme miapp -configuration Debug -sdk iphoneos -derivedDataPath /tmp/miapp-dd build
APP_PATH="$(find /tmp/miapp-dd/Build/Products -name '*.app' -print -quit)"
echo "$APP_PATH"
xcrun devicectl device install app --device 6CED4037-1DA0-57E6-A425-92A15B300343 "$APP_PATH"
BUNDLE_ID="$(/usr/libexec/PlistBuddy -c 'Print :CFBundleIdentifier' "$APP_PATH/Info.plist")"
echo "$BUNDLE_ID"
xcrun devicectl device launch app --terminate-existing --device 6CED4037-1DA0-57E6-A425-92A15B300343 "$BUNDLE_ID"
'''
